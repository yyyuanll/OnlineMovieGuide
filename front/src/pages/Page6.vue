<template >
<div >
<q-ajax-bar
      ref="bar"
      position="bottom"
      color="cyan-2"
      size="10px"
      skip-hijack
    />

    <q-btn color="primary" label="Trigger" @click="trigger" />
<el-container style="height: 100%; border: 1px solid #eee;">
  <el-aside width="250px"  style="">
      <el-scrollbar>
      <el-avatar :size="80" :src="useravatar" style="margin-left:85px;margin-top:20px"></el-avatar>
       <el-card shadow="hover" style="background-color:#ffffff;width:200px;margin-left:25px;margin-top:-30px;border-radius:16px;height:90px;margin-bottom:20px">
      <div class="username" style="postion:center;width:160px;font-size:20px;margin-left:12%;margin-bottom:20px;display:inline-block;margin-top:10px;color:rgb(35,35,35);float:left">{{username}}</div>
      <svg t="1639968606150"  style="margin-top:-88px;float:right;margin-right:-28px" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3449" width="48" height="48"><path d="M198.776471 423.905882c14.305882 12.047059 56.470588 55.717647 58.729411 91.858824 0.752941 12.047059-3.011765 21.835294-11.294117 30.870588-6.023529 6.776471-8.282353 15.811765-5.270589 24.094118 2.258824 6.023529 6.023529 11.294118 12.047059 15.058823-9.035294 9.788235-16.564706 21.082353-22.588235 33.882353-11.294118 27.105882-12.047059 57.223529-0.752941 84.329412 15.058824 37.647059 49.694118 64 89.6 68.517647 15.058824 1.505882 30.870588 0 45.929412-4.517647 3.764706 20.329412 12.8 39.905882 26.352941 56.470588 20.329412 24.847059 48.941176 40.658824 81.317647 44.42353 33.882353 3.764706 67.011765-6.023529 92.611765-27.105883 27.858824-23.341176 43.670588-56.470588 45.17647-91.858823 30.117647 6.776471 47.435294 15.811765 47.435294 15.811764 7.529412 3.764706 17.317647 3.764706 24.094118-0.752941 7.529412-4.517647 12.047059-12.047059 12.8-21.082353 0.752941-12.8 4.517647-21.835294 13.552941-30.117647 27.105882-24.094118 86.588235-25.6 106.917647-24.094117 10.541176 0.752941 20.329412-4.517647 24.847059-14.305883 4.517647-9.035294 3.011765-20.329412-4.517647-27.858823-12.8-14.305882-18.070588-25.6-15.058824-34.635294 6.776471-22.588235 56.470588-42.917647 87.341177-50.447059 9.788235-2.258824 17.317647-9.788235 18.823529-19.576471 2.258824-9.788235-1.505882-19.576471-9.788235-25.6-60.235294-43.670588-27.858824-131.011765-26.352941-134.023529 3.764706-9.788235 1.505882-21.082353-6.776471-28.611765-8.282353-6.776471-19.576471-8.282353-29.364706-3.011765-6.776471 0.752941-18.823529 0.752941-31.623529-0.752941-42.917647-5.270588-71.529412-24.094118-85.835294-56.470588-3.764706-9.035294-12.8-15.058824-22.588236-15.811765-9.788235 0-18.823529 5.270588-23.341176 14.305883-13.552941 27.858824-42.164706 67.011765-64.752941 73.035294 5.270588-8.282353 5.270588-18.823529 0-27.105883-6.023529-9.035294-15.811765-12.8-26.352941-11.294117-9.035294 3.011765-16.564706 3.764706-23.341177 3.011764-10.541176-1.505882-14.305882-5.270588-16.564706-9.035294-14.305882-21.835294-3.011765-75.294118 4.517647-97.882353 3.011765-9.035294 0.752941-19.576471-6.77647-26.352941-7.529412-6.776471-18.070588-8.282353-27.105883-4.517647-14.305882 6.023529-27.858824 8.282353-42.164705 6.02353-48.941176-6.023529-85.082353-55.717647-85.835295-56.470589-4.517647-5.270588-10.541176-10.541176-17.317647-11.294117-13.552941-1.505882-26.352941 9.788235-27.858823 24.094117v3.011765c-11.294118 21.082353-47.435294 80.564706-109.929412 70.776471-9.788235-1.505882-19.576471 3.011765-24.847059 11.294117-5.270588 8.282353-5.270588 18.823529 0 27.858824 17.317647 27.105882 37.647059 76.8 27.105883 97.129412-4.517647 8.282353-16.564706 13.552941-35.388236 14.305882-10.541176 0.752941-19.576471 7.529412-22.588235 17.317647-4.517647 9.788235-1.505882 21.082353 6.776471 27.105882z" fill="#FFFFFF" p-id="3450"></path><path d="M458.541176 719.058824S379.482353 273.317647 382.494118 158.870588c0 0 70.023529 91.858824 158.117647 55.717647 0 0-54.211765 163.388235 64.752941 138.541177 0 0-84.329412 118.211765-9.035294 167.152941-0.752941 0-94.870588 56.470588-137.788236 198.776471z" fill="#667A45" p-id="3451"></path><path d="M458.541176 719.058824s-43.670588-447.247059-74.541176-557.176471c0 0-45.176471 106.164706-140.047059 92.611765 0 0 92.611765 144.564706-28.611765 149.835294 0 0 110.682353 93.364706 49.694118 159.623529 0 0.752941 115.952941 27.858824 193.505882 155.105883z" fill="#7B974D" p-id="3452"></path><path d="M299.670588 292.894118c24.847059 15.811765 51.2 25.6 74.541177 45.17647 25.6 21.082353 43.670588 48.941176 53.458823 80.564706 0.752941 7.529412 1.505882 15.058824 3.011765 22.588235l6.776471 67.764706c-11.294118-18.070588-28.611765-33.129412-44.42353-45.929411-29.364706-24.094118-58.729412-31.623529-95.623529-35.388236-3.011765 0-3.011765 3.764706-0.752941 4.517647 65.505882 9.788235 108.423529 46.682353 143.058823 100.141177 0.752941 12.047059 2.258824 24.094118 3.011765 36.141176 0.752941 12.047059 2.258824 24.094118 2.258823 36.141177-8.282353-15.811765-21.835294-29.364706-36.141176-39.905883-28.611765-21.082353-61.741176-16.564706-94.870588-19.57647-3.764706 0-4.517647 5.270588-0.752942 6.023529 30.117647 3.011765 62.494118 6.776471 88.094118 24.094118 21.082353 14.305882 31.623529 35.388235 45.929412 55.717647 1.505882 21.835294 3.011765 44.423529 6.77647 66.258823 0.752941 3.764706 6.023529 4.517647 8.282353 0.752942 5.270588-12.047059 1.505882-30.117647 0.752942-42.917647l-2.258824-33.882353c7.529412-19.576471 17.317647-37.647059 30.870588-53.458824 18.070588-21.082353 41.411765-30.117647 64.752941-41.411765 2.258824-0.752941 2.258824-5.270588-0.752941-5.270588-42.164706-1.505882-83.576471 37.647059-97.129412 79.058824-0.752941-4.517647-0.752941-8.282353-1.505882-12.8-2.258824-21.082353-3.764706-41.411765-6.023529-62.494118 10.541176-25.6 21.082353-49.694118 37.647059-73.788235 20.329412-29.364706 48.188235-48.188235 77.552941-67.011765 3.011765-1.505882-0.752941-5.270588-3.011765-3.764706-15.811765 9.788235-31.623529 15.058824-45.929412 26.352941-13.552941 11.294118-24.847059 24.847059-36.141176 39.152941-11.294118 14.305882-24.847059 33.129412-33.129412 52.705883-1.505882-15.811765-3.011765-31.623529-4.517647-48.188235-1.505882-18.070588-3.764706-36.894118-6.023529-54.964706 6.023529-21.835294 11.294118-43.670588 21.082352-64.752942 13.552941-29.364706 30.870588-57.223529 51.952942-81.317647 1.505882-2.258824-1.505882-5.270588-3.764706-3.764705-33.129412 27.858824-61.741176 73.788235-73.035294 119.717647-9.035294-61.741176-22.588235-122.729412-44.42353-181.458824-0.752941-1.505882-3.011765-0.752941-3.011764 0.752941 15.058824 62.494118 26.352941 125.741176 35.388235 189.741177-6.776471-10.541176-15.058824-20.329412-21.082353-27.105883-23.341176-28.611765-61.741176-56.470588-99.388235-57.223529-1.505882-0.752941-3.011765 1.505882-1.505883 3.011765z" fill="#515D33" p-id="3453"></path><path d="M428.423529 729.6s340.329412-298.917647 438.964706-355.388235c0 0-42.164706 107.670588 34.635294 164.141176 0 0-167.152941 38.4-85.082353 127.247059 0 0-144.564706-10.541176-147.57647 79.058824 0.752941-0.752941-96.376471-51.952941-240.941177-15.058824z" fill="#667A45" p-id="3454"></path><path d="M428.423529 729.6S788.329412 460.047059 865.882353 376.470588c0 0-114.447059 16.564706-151.341177-71.529412 0 0-76.047059 154.352941-143.058823 53.458824 0 0-22.588235 143.058824-110.682353 125.741176 0 0 36.894118 113.694118-32.376471 245.458824z" fill="#7B974D" p-id="3455"></path><path d="M710.776471 373.458824c-0.752941 29.364706 4.517647 57.223529 0 86.588235-4.517647 33.129412-19.576471 62.494118-40.658824 87.341176-6.023529 4.517647-12.047059 9.788235-18.070588 14.305883-18.070588 14.305882-36.141176 27.858824-54.964706 41.411764 9.788235-18.823529 13.552941-41.411765 16.564706-61.741176 5.270588-37.647059-3.764706-66.258824-19.576471-100.141177-1.505882-2.258824-5.270588-0.752941-3.764706 1.505883 25.6 60.988235 15.811765 116.705882-11.294117 173.929412-9.788235 7.529412-19.576471 14.305882-29.364706 21.835294-9.788235 7.529412-19.576471 14.305882-29.364706 21.082353 9.035294-15.058824 13.552941-33.882353 15.058823-51.952942 3.764706-35.388235-18.070588-61.741176-32.37647-91.858823-1.505882-3.011765-6.776471-0.752941-5.270588 2.258823 12.8 27.858824 26.352941 56.470588 24.847058 88.094118-1.505882 25.6-13.552941 45.929412-23.341176 67.764706-18.070588 12.8-36.141176 25.6-52.705882 39.905882-3.011765 3.011765-0.752941 8.282353 3.011764 7.529412 12.8-2.258824 27.105882-14.305882 37.647059-21.835294 9.788235-6.776471 18.823529-12.8 27.858824-19.576471 20.329412-3.764706 41.411765-4.517647 61.741176-1.505882 27.105882 4.517647 46.682353 19.576471 69.270588 33.882353 2.258824 1.505882 5.270588-0.752941 3.764706-3.011765-21.082353-36.894118-75.294118-51.952941-117.458823-42.164706 3.764706-2.258824 6.776471-5.270588 10.541176-7.529411 16.564706-12.047059 33.129412-24.847059 49.694118-37.647059 27.858824-3.764706 53.458824-8.282353 82.823529-6.02353 35.388235 2.258824 66.258824 15.811765 97.882353 31.62353 3.011765 1.505882 4.517647-3.011765 1.505883-4.517647-16.564706-8.282353-29.364706-19.576471-46.682353-25.6-16.564706-6.023529-34.635294-8.282353-51.952942-10.541177-18.823529-2.258824-41.411765-3.764706-62.494117-0.752941 12.8-9.788235 25.6-19.576471 38.4-28.611765 15.058824-11.294118 29.364706-21.835294 43.670588-33.882353 21.835294-6.023529 43.670588-12.8 66.258824-15.811764 31.623529-3.764706 64.752941-3.011765 96.37647 2.258823 3.011765 0.752941 3.764706-3.764706 0.752941-4.517647-40.658824-13.552941-94.870588-14.305882-140.047058 0 48.188235-39.905882 93.364706-82.823529 131.764705-131.764706 0.752941-1.505882-0.752941-3.011765-2.258823-1.505882-45.929412 45.176471-94.117647 88.094118-143.811765 128.752941 5.270588-11.294118 9.788235-23.341176 12.8-31.623529 12.047059-34.635294 16.564706-82.070588-3.011765-114.447059-0.752941-4.517647-3.764706-4.517647-3.764705-1.505882z" fill="#515D33" p-id="3456"></path><path d="M424.658824 670.117647c42.164706-34.635294 103.905882-28.611765 138.541176 13.552941 34.635294 42.164706 28.611765 103.905882-13.552941 138.541177-42.164706 34.635294-103.905882 28.611765-138.541177-13.552941-34.635294-41.411765-28.611765-103.905882 13.552942-138.541177z" fill="#D64544" p-id="3457"></path><path d="M461.552941 728.094118c17.317647-14.305882 42.917647-12.047059 56.470588 5.270588 14.305882 17.317647 11.294118 42.164706-6.023529 56.470588-17.317647 14.305882-42.917647 12.047059-56.470588-5.270588-13.552941-16.564706-11.294118-42.164706 6.023529-56.470588z" fill="#981831" p-id="3458"></path><path d="M454.023529 740.894118c11.294118-9.035294 27.858824-7.529412 37.647059 3.764706 9.035294 11.294118 7.529412 27.858824-3.764706 37.647058-11.294118 9.035294-27.858824 7.529412-37.647058-3.764706-9.035294-11.294118-7.529412-28.611765 3.764705-37.647058z" fill="#520D1B" p-id="3459"></path><path d="M252.988235 694.964706c-17.317647-43.670588 3.764706-92.611765 47.435294-110.682353 43.670588-17.317647 92.611765 3.764706 110.682353 47.435294 17.317647 43.670588-3.764706 92.611765-47.435294 110.682353-43.670588 17.317647-93.364706-3.764706-110.682353-47.435294z" fill="#D64544" p-id="3460"></path><path d="M308.705882 676.141176c-8.282353-19.576471 1.505882-42.164706 21.082353-50.447058 19.576471-7.529412 42.164706 1.505882 49.694118 21.835294 8.282353 19.576471-1.505882 42.164706-21.082353 50.447059-18.823529 7.529412-41.411765-2.258824-49.694118-21.835295z" fill="#981831" p-id="3461"></path><path d="M318.494118 688.941176c-4.517647-12.047059 0.752941-24.847059 12.8-30.117647 12.047059-4.517647 24.847059 0.752941 30.117647 12.8 4.517647 12.047059-0.752941 24.847059-12.8 30.117647-11.294118 4.517647-24.847059-1.505882-30.117647-12.8z" fill="#520D1B" p-id="3462"></path><path d="M397.552941 556.423529c29.364706-45.929412 90.352941-58.729412 136.282353-28.611764 45.929412 29.364706 58.729412 90.352941 28.611765 136.282353-29.364706 45.176471-90.352941 58.729412-136.282353 28.611764-45.929412-29.364706-58.729412-90.352941-28.611765-136.282353z" fill="#D64544" p-id="3463"></path><path d="M450.258824 601.6c12.047059-18.070588 36.141176-23.341176 54.211764-12.047059 18.070588 12.047059 23.341176 36.141176 11.294118 54.211765-12.047059 18.070588-36.141176 23.341176-54.211765 12.047059-18.823529-11.294118-23.341176-36.141176-11.294117-54.211765z" fill="#981831" p-id="3464"></path><path d="M447.247059 615.152941c8.282353-12.047059 24.847059-15.811765 36.894117-7.529412 12.047059 8.282353 15.811765 24.847059 7.529412 36.894118-8.282353 12.047059-24.847059 15.811765-36.894117 7.529412-12.047059-8.282353-15.811765-24.847059-7.529412-36.894118z" fill="#520D1B" p-id="3465"></path></svg>
       </el-card>
    <el-menu
      class="el-menu-vertical-demo"
      
      default-active="0"
      router=true
      style="width:240px;margin-left:5px;border-radius:16px;height:240px">

      <el-menu-item index="/page6/chart"  style="height:0px" :default-active="0" v-on:click="this.index=0">
          <router-link  :to="{path:'/page6/chart',query:{username: this.$route.query.username}}"></router-link>
      </el-menu-item>
      
      <el-menu-item index="/page6/history"  style="height:80px" v-on:click="this.index=1">
          <router-link :to="{path:'/page6/history',query:{username: this.$route.query.username}}" ></router-link>
         
        <i class="el-icon-menu" style="margin-top:20px"></i>
        <span slot="title" style="margin-top:20px;position:relative;top:10px;font-size:16px">History</span>
      </el-menu-item>
      <el-menu-item index="/page6/favorite" v-on:click="this.index=2" style="height:80px">
        <router-link :to="{path:'/page6/favorite',query:{username: this.$route.query.username}}" ></router-link>
        <i class="el-icon-document" style="margin-top:20px"></i>
        <span slot="title" style="margin-top:20px;position:relative;top:10px;font-size:16px">Favorite</span>
      </el-menu-item>
      <el-menu-item index="/page6/review"  v-on:click="this.index=3" style="height:80px">
        <router-link :to="{path:'/page6/review',query:{username: this.$route.query.username}}" ></router-link>
        <i class="el-icon-setting" style="margin-top:20px"></i>
        <span slot="title" style="margin-top:20px;position:relative;top:10px;font-size:16px">Review</span>
      </el-menu-item>
    </el-menu>
    
    </el-scrollbar>
  </el-aside>
  
  <el-container style="">
    
    
    <router-view/>

  </el-container>
</el-container>
</div>
</template>
<style>
  .el-header {
    background-color: #B3C0D1;
    color: #333;
    line-height: 60px;
  }
  
  .el-aside {
    color: #333;
  }
  .el-scrollbar {
        height: 100%;
    }
    .el-scrollbar__wrap {
        overflow: scroll;
        width: 110%;
        height: 120%;
    }
</style>

<script>
//import { response } from 'express';
import Axios from 'axios';
  export default 
  {
    data() {

      return {
          index:"",
          find:true,
          username: 'Lucas Kim',
          useravatar: "https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png",
      }
    },
created(){
            //this.getUsername();
            console.log(this.username)
            var username = this.username
            Axios
                .get("http://127.0.0.1:8000/user/profile/", {
                    params:{
                        username: this.username
                        
                    },

                })
                .then(response => (this.useravatar = response.data))
                console.log(this.useravatar)
                console.log(response.data)
                .catch(function(error){
                    console.log(error);
                });
        },
watch: {
  // 监测路由变化,只要变化了就调用获取路由参数方法将数据存储本组件即可
  '$route': 'getUsername'
},
    methods:{
        //find:function(){
         //if(this.index==""){
           // return true}
        //else{
          //  return false
       // }
     //}
     getUsername:function(){
                var routerUserName = this.$router.query.username
                console.log(routerUserName)
                this.username = routerUserName
            },
     trigger () {
      const bar = this.$refs.bar

      bar.start()

      this.timer = setTimeout(() => {
        if (this.$refs.bar) {
          this.$refs.bar.stop()
        }
      }, Math.random() * 3000 + 1000)
    }
    },

     
  };
</script>